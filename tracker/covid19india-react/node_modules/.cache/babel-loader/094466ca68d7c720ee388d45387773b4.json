{"ast":null,"code":"import produce from 'immer';\nimport { useState } from 'react';\nimport { useUpdateEffect } from 'react-use';\nimport useSWR from 'swr';\nexport function useStickySWR(key, fetcher, swrOptions, ...args) {\n  const [options, setOptions] = useState(swrOptions);\n  const {\n    data,\n    isValidating,\n    error,\n    ...rest\n  } = useSWR(key, fetcher, options, ...args);\n  useUpdateEffect(() => {\n    setOptions(produce(options, draftOptions => {\n      draftOptions.initialData = data;\n    }));\n  }, [data]);\n  return { ...rest,\n    isValidating,\n    error,\n    data\n  };\n}\nexport default useStickySWR;","map":{"version":3,"sources":["/home/ubuntu/myprojectdir/tracker/covid19india-react/src/hooks/useStickySWR.js"],"names":["produce","useState","useUpdateEffect","useSWR","useStickySWR","key","fetcher","swrOptions","args","options","setOptions","data","isValidating","error","rest","draftOptions","initialData"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,OAApB;AACA,SAAQC,QAAR,QAAuB,OAAvB;AACA,SAAQC,eAAR,QAA8B,WAA9B;AACA,OAAOC,MAAP,MAAmB,KAAnB;AAEA,OAAO,SAASC,YAAT,CAAsBC,GAAtB,EAA2BC,OAA3B,EAAoCC,UAApC,EAAgD,GAAGC,IAAnD,EAAyD;AAC9D,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBT,QAAQ,CAACM,UAAD,CAAtC;AAEA,QAAM;AAACI,IAAAA,IAAD;AAAOC,IAAAA,YAAP;AAAqBC,IAAAA,KAArB;AAA4B,OAAGC;AAA/B,MAAuCX,MAAM,CACjDE,GADiD,EAEjDC,OAFiD,EAGjDG,OAHiD,EAIjD,GAAGD,IAJ8C,CAAnD;AAOAN,EAAAA,eAAe,CAAC,MAAM;AACpBQ,IAAAA,UAAU,CACRV,OAAO,CAACS,OAAD,EAAWM,YAAD,IAAkB;AACjCA,MAAAA,YAAY,CAACC,WAAb,GAA2BL,IAA3B;AACD,KAFM,CADC,CAAV;AAKD,GANc,EAMZ,CAACA,IAAD,CANY,CAAf;AAQA,SAAO,EACL,GAAGG,IADE;AAELF,IAAAA,YAFK;AAGLC,IAAAA,KAHK;AAILF,IAAAA;AAJK,GAAP;AAMD;AAED,eAAeP,YAAf","sourcesContent":["import produce from 'immer';\nimport {useState} from 'react';\nimport {useUpdateEffect} from 'react-use';\nimport useSWR from 'swr';\n\nexport function useStickySWR(key, fetcher, swrOptions, ...args) {\n  const [options, setOptions] = useState(swrOptions);\n\n  const {data, isValidating, error, ...rest} = useSWR(\n    key,\n    fetcher,\n    options,\n    ...args\n  );\n\n  useUpdateEffect(() => {\n    setOptions(\n      produce(options, (draftOptions) => {\n        draftOptions.initialData = data;\n      })\n    );\n  }, [data]);\n\n  return {\n    ...rest,\n    isValidating,\n    error,\n    data,\n  };\n}\n\nexport default useStickySWR;\n"]},"metadata":{},"sourceType":"module"}