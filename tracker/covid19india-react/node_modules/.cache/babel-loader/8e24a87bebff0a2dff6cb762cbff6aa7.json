{"ast":null,"code":"import _slicedToArray from\"/home/ubuntu/myprojectdir/tracker/covid19india-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{API_ROOT_URL}from'../constants';import useIsVisible from'../hooks/useIsVisible';import useStickySWR from'../hooks/useStickySWR';import{fetcher}from'../utils/commonFunctions';import classnames from'classnames';import React,{useState,useRef,lazy,Suspense}from'react';import{Helmet}from'react-helmet';import{useLocation}from'react-router-dom';import{useLocalStorage,useSessionStorage,useWindowSize}from'react-use';var TimeseriesExplorer=lazy(function(){return import('./TimeseriesExplorer');});var MapExplorer=lazy(function(){return import('./MapExplorer');});var Actions=lazy(function(){return import('./Actions');});var Table=lazy(function(){return import('./Table');});var Minigraphs=lazy(function(){return import('./Minigraphs');});var Footer=lazy(function(){return import('./Footer');});var Search=lazy(function(){return import('./Search');});var Level=lazy(function(){return import('./Level');});var MapSwitcher=lazy(function(){return import('./MapSwitcher');});var StateHeader=lazy(function(){return import('./StateHeader');});function Home(){var _timeseries$TT,_timeseries$TT2;var _useState=useState({stateCode:'TT',districtName:null}),_useState2=_slicedToArray(_useState,2),regionHighlighted=_useState2[0],setRegionHighlighted=_useState2[1];var _useLocalStorage=useLocalStorage('anchor',null),_useLocalStorage2=_slicedToArray(_useLocalStorage,2),anchor=_useLocalStorage2[0],setAnchor=_useLocalStorage2[1];var _useLocalStorage3=useLocalStorage('expandTable',false),_useLocalStorage4=_slicedToArray(_useLocalStorage3,2),expandTable=_useLocalStorage4[0],setExpandTable=_useLocalStorage4[1];var _useSessionStorage=useSessionStorage('mapStatistic','active'),_useSessionStorage2=_slicedToArray(_useSessionStorage,2),mapStatistic=_useSessionStorage2[0],setMapStatistic=_useSessionStorage2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),date=_useState4[0],setDate=_useState4[1];var location=useLocation();var _useStickySWR=useStickySWR(\"\".concat(API_ROOT_URL,\"/timeseries.min.json\"),fetcher,{revalidateOnMount:true,refreshInterval:100000}),timeseries=_useStickySWR.data;var _useStickySWR2=useStickySWR(\"\".concat(API_ROOT_URL,\"/data\").concat(date?\"-\".concat(date):'',\".min.json\"),fetcher,{revalidateOnMount:true,refreshInterval:100000}),data=_useStickySWR2.data;var homeRightElement=useRef();var isVisible=useIsVisible(homeRightElement);var _useWindowSize=useWindowSize(),width=_useWindowSize.width;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Helmet,null,/*#__PURE__*/React.createElement(\"title\",null,\"Coronavirus Outbreak in India - covid19india.org\"),/*#__PURE__*/React.createElement(\"meta\",{name:\"title\",content:\"Coronavirus Outbreak in India: Latest Map and Case Count\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"Home\"},/*#__PURE__*/React.createElement(\"div\",{className:classnames('home-left',{expanded:expandTable})},/*#__PURE__*/React.createElement(\"div\",{className:\"header\"},/*#__PURE__*/React.createElement(Suspense,{fallback:/*#__PURE__*/React.createElement(\"div\",null)},/*#__PURE__*/React.createElement(Search,null)),timeseries&&/*#__PURE__*/React.createElement(Suspense,{fallback:/*#__PURE__*/React.createElement(\"div\",{style:{minHeight:'56px'}})},/*#__PURE__*/React.createElement(Actions,{setDate:setDate,dates:Object.keys((_timeseries$TT=timeseries['TT'])===null||_timeseries$TT===void 0?void 0:_timeseries$TT.dates).reverse(),date:date}))),/*#__PURE__*/React.createElement(\"div\",{style:{position:'relative',marginTop:'1rem'}},data&&/*#__PURE__*/React.createElement(Suspense,{fallback:/*#__PURE__*/React.createElement(\"div\",{style:{height:'50rem'}})},width>769&&/*#__PURE__*/React.createElement(MapSwitcher,{mapStatistic:mapStatistic,setMapStatistic:setMapStatistic}),/*#__PURE__*/React.createElement(Level,{data:data['TT']})),timeseries&&/*#__PURE__*/React.createElement(Suspense,{fallback:/*#__PURE__*/React.createElement(\"div\",{style:{height:'50rem'}})},/*#__PURE__*/React.createElement(Minigraphs,Object.assign({timeseries:(_timeseries$TT2=timeseries['TT'])===null||_timeseries$TT2===void 0?void 0:_timeseries$TT2.dates},{date:date})))),data&&/*#__PURE__*/React.createElement(Suspense,{fallback:/*#__PURE__*/React.createElement(\"div\",null)},/*#__PURE__*/React.createElement(Table,{data:data,regionHighlighted:regionHighlighted,setRegionHighlighted:setRegionHighlighted,expandTable:expandTable,setExpandTable:setExpandTable}))),/*#__PURE__*/React.createElement(\"div\",{className:classnames('home-right',{expanded:expandTable}),ref:homeRightElement},(isVisible||location.hash)&&/*#__PURE__*/React.createElement(React.Fragment,null,data&&/*#__PURE__*/React.createElement(\"div\",{className:classnames('map-container',{expanded:expandTable})},/*#__PURE__*/React.createElement(Suspense,{fallback:/*#__PURE__*/React.createElement(\"div\",{style:{height:'50rem'}})},/*#__PURE__*/React.createElement(StateHeader,{data:data['TT'],stateCode:'TT'}),/*#__PURE__*/React.createElement(MapExplorer,Object.assign({stateCode:\"TT\"},{data:data},{mapStatistic:mapStatistic,setMapStatistic:setMapStatistic},{regionHighlighted:regionHighlighted,setRegionHighlighted:setRegionHighlighted},{anchor:anchor,setAnchor:setAnchor},{expandTable:expandTable})))),timeseries&&/*#__PURE__*/React.createElement(Suspense,{fallback:/*#__PURE__*/React.createElement(\"div\",null)},/*#__PURE__*/React.createElement(TimeseriesExplorer,Object.assign({stateCode:\"TT\"},{timeseries:timeseries,date:date,regionHighlighted:regionHighlighted,setRegionHighlighted:setRegionHighlighted,anchor:anchor,setAnchor:setAnchor,expandTable:expandTable})))))),isVisible&&/*#__PURE__*/React.createElement(Suspense,{fallback:/*#__PURE__*/React.createElement(\"div\",null)},/*#__PURE__*/React.createElement(Footer,null)));}export default Home;","map":{"version":3,"sources":["/home/ubuntu/myprojectdir/tracker/covid19india-react/src/components/Home.js"],"names":["API_ROOT_URL","useIsVisible","useStickySWR","fetcher","classnames","React","useState","useRef","lazy","Suspense","Helmet","useLocation","useLocalStorage","useSessionStorage","useWindowSize","TimeseriesExplorer","MapExplorer","Actions","Table","Minigraphs","Footer","Search","Level","MapSwitcher","StateHeader","Home","stateCode","districtName","regionHighlighted","setRegionHighlighted","anchor","setAnchor","expandTable","setExpandTable","mapStatistic","setMapStatistic","date","setDate","location","revalidateOnMount","refreshInterval","timeseries","data","homeRightElement","isVisible","width","expanded","minHeight","dates","Object","keys","reverse","position","marginTop","height","hash"],"mappings":"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","sourcesContent":["import {API_ROOT_URL} from '../constants';\nimport useIsVisible from '../hooks/useIsVisible';\nimport useStickySWR from '../hooks/useStickySWR';\nimport {fetcher} from '../utils/commonFunctions';\n\nimport classnames from 'classnames';\nimport React, {useState, useRef, lazy, Suspense} from 'react';\nimport {Helmet} from 'react-helmet';\nimport {useLocation} from 'react-router-dom';\nimport {useLocalStorage, useSessionStorage, useWindowSize} from 'react-use';\n\nconst TimeseriesExplorer = lazy(() => import('./TimeseriesExplorer'));\nconst MapExplorer = lazy(() => import('./MapExplorer'));\nconst Actions = lazy(() => import('./Actions'));\nconst Table = lazy(() => import('./Table'));\nconst Minigraphs = lazy(() => import('./Minigraphs'));\nconst Footer = lazy(() => import('./Footer'));\nconst Search = lazy(() => import('./Search'));\nconst Level = lazy(() => import('./Level'));\nconst MapSwitcher = lazy(() => import('./MapSwitcher'));\nconst StateHeader = lazy(() => import('./StateHeader'));\n\nfunction Home() {\n  const [regionHighlighted, setRegionHighlighted] = useState({\n    stateCode: 'TT',\n    districtName: null,\n  });\n\n  const [anchor, setAnchor] = useLocalStorage('anchor', null);\n  const [expandTable, setExpandTable] = useLocalStorage('expandTable', false);\n  const [mapStatistic, setMapStatistic] = useSessionStorage(\n    'mapStatistic',\n    'active'\n  );\n  const [date, setDate] = useState('');\n  const location = useLocation();\n\n  const {data: timeseries} = useStickySWR(\n    `${API_ROOT_URL}/timeseries.min.json`,\n    fetcher,\n    {\n      revalidateOnMount: true,\n      refreshInterval: 100000,\n    }\n  );\n\n  const {data} = useStickySWR(\n    `${API_ROOT_URL}/data${date ? `-${date}` : ''}.min.json`,\n    fetcher,\n    {\n      revalidateOnMount: true,\n      refreshInterval: 100000,\n    }\n  );\n\n  const homeRightElement = useRef();\n  const isVisible = useIsVisible(homeRightElement);\n  const {width} = useWindowSize();\n\n  return (\n    <React.Fragment>\n      <Helmet>\n        <title>Coronavirus Outbreak in India - covid19india.org</title>\n        <meta\n          name=\"title\"\n          content=\"Coronavirus Outbreak in India: Latest Map and Case Count\"\n        />\n      </Helmet>\n\n      <div className=\"Home\">\n        <div className={classnames('home-left', {expanded: expandTable})}>\n          <div className=\"header\">\n            <Suspense fallback={<div />}>\n              <Search />\n            </Suspense>\n\n            {timeseries && (\n              <Suspense fallback={<div style={{minHeight: '56px'}} />}>\n                <Actions\n                  {...{\n                    setDate,\n                    dates: Object.keys(timeseries['TT']?.dates).reverse(),\n                    date,\n                  }}\n                />\n              </Suspense>\n            )}\n          </div>\n\n          <div style={{position: 'relative', marginTop: '1rem'}}>\n            {data && (\n              <Suspense fallback={<div style={{height: '50rem'}} />}>\n                {width > 769 && (\n                  <MapSwitcher {...{mapStatistic, setMapStatistic}} />\n                )}\n                <Level data={data['TT']} />\n              </Suspense>\n            )}\n\n            {timeseries && (\n              <Suspense fallback={<div style={{height: '50rem'}} />}>\n                <Minigraphs timeseries={timeseries['TT']?.dates} {...{date}} />\n              </Suspense>\n            )}\n          </div>\n\n          {data && (\n            <Suspense fallback={<div />}>\n              <Table\n                {...{\n                  data,\n                  regionHighlighted,\n                  setRegionHighlighted,\n                  expandTable,\n                  setExpandTable,\n                }}\n              />\n            </Suspense>\n          )}\n        </div>\n\n        <div\n          className={classnames('home-right', {expanded: expandTable})}\n          ref={homeRightElement}\n        >\n          {(isVisible || location.hash) && (\n            <React.Fragment>\n              {data && (\n                <div\n                  className={classnames('map-container', {\n                    expanded: expandTable,\n                  })}\n                >\n                  <Suspense fallback={<div style={{height: '50rem'}} />}>\n                    <StateHeader data={data['TT']} stateCode={'TT'} />\n                    <MapExplorer\n                      stateCode=\"TT\"\n                      {...{data}}\n                      {...{mapStatistic, setMapStatistic}}\n                      {...{regionHighlighted, setRegionHighlighted}}\n                      {...{anchor, setAnchor}}\n                      {...{expandTable}}\n                    />\n                  </Suspense>\n                </div>\n              )}\n\n              {timeseries && (\n                <Suspense fallback={<div />}>\n                  <TimeseriesExplorer\n                    stateCode=\"TT\"\n                    {...{\n                      timeseries,\n                      date,\n                      regionHighlighted,\n                      setRegionHighlighted,\n                      anchor,\n                      setAnchor,\n                      expandTable,\n                    }}\n                  />\n                </Suspense>\n              )}\n            </React.Fragment>\n          )}\n        </div>\n      </div>\n\n      {isVisible && (\n        <Suspense fallback={<div />}>\n          <Footer />\n        </Suspense>\n      )}\n    </React.Fragment>\n  );\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}