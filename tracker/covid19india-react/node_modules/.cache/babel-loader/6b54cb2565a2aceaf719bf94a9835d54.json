{"ast":null,"code":"import{parse,format}from'date-fns';import{utcToZonedTime}from'date-fns-tz';import React,{useMemo,useCallback,lazy,Suspense}from'react';import*as Icon from'react-feather';import{useSpring,animated}from'react-spring';var Timeline=lazy(function(){return import('./Timeline');});var ActionsPanel=function ActionsPanel(_ref){var lastViewedLog=_ref.lastViewedLog,newUpdate=_ref.newUpdate,isTimelineMode=_ref.isTimelineMode,setIsTimelineMode=_ref.setIsTimelineMode,showUpdates=_ref.showUpdates,setDate=_ref.setDate,dates=_ref.dates,setNewUpdate=_ref.setNewUpdate,setShowUpdates=_ref.setShowUpdates;var Bell=useMemo(function(){return/*#__PURE__*/React.createElement(Icon.Bell,{onClick:function onClick(){setShowUpdates(!showUpdates);setNewUpdate(false);}});},[setNewUpdate,setShowUpdates,showUpdates]);var BellOff=useMemo(function(){return/*#__PURE__*/React.createElement(Icon.BellOff,{onClick:function onClick(){setShowUpdates(!showUpdates);}});},[setShowUpdates,showUpdates]);var TimelineIcon=useMemo(function(){return/*#__PURE__*/React.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"-.2 -.2 17 17\",width:\"16\",height:\"16\"},/*#__PURE__*/React.createElement(\"path\",{fillRule:\"evenodd\",d:\"M1.643 3.143L.427 1.927A.25.25 0 000 2.104V5.75c0 .138.112.25.25.25h3.646a.25.25 0 00.177-.427L2.715 4.215a6.5 6.5 0 11-1.18 4.458.75.75 0 10-1.493.154 8.001 8.001 0 101.6-5.684zM7.75 4a.75.75 0 01.75.75v2.992l2.028.812a.75.75 0 01-.557 1.392l-2.5-1A.75.75 0 017 8.25v-3.5A.75.75 0 017.75 4z\"}));},[]);var _useSpring=useSpring({opacity:isTimelineMode?1:0,transform:\"perspective(600px) rotateX(\".concat(isTimelineMode?180:0,\"deg)\"),config:{mass:5,tension:500,friction:80}}),transform=_useSpring.transform,opacity=_useSpring.opacity;var trail=useMemo(function(){var styles=[];[0,0,0].map(function(element,index){styles.push({animationDelay:\"\".concat(500+index*250,\"ms\")});return null;});return styles;},[]);var getTimeFromMilliseconds=function getTimeFromMilliseconds(lastViewedLog){return format(utcToZonedTime(parse(lastViewedLog,'T',new Date()),'Asia/Kolkata'),'dd MMM, p');};var handleClick=useCallback(function(){setIsTimelineMode(true);if(showUpdates)setShowUpdates(!showUpdates);},[setIsTimelineMode,setShowUpdates,showUpdates]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(animated.div,{className:\"actions\",style:{opacity:opacity.interpolate(function(o){return 1-o;}),transform:transform,pointerEvents:isTimelineMode?'none':''}},/*#__PURE__*/React.createElement(\"h5\",{className:\"fadeInUp\",style:trail[0]},\"\".concat(getTimeFromMilliseconds(lastViewedLog),\" IST\")),/*#__PURE__*/React.createElement(\"div\",{className:\"bell-icon fadeInUp\",style:trail[1]},!showUpdates?Bell:BellOff,newUpdate&&/*#__PURE__*/React.createElement(\"div\",{className:\"indicator\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"timeline-icon fadeInUp\",onClick:handleClick,style:trail[2]},TimelineIcon)),/*#__PURE__*/React.createElement(animated.div,{className:\"actions timeline\",style:{opacity:opacity,transform:transform.interpolate(function(t){return\"\".concat(t,\" rotateX(180deg)\");}),pointerEvents:!isTimelineMode?'none':''}},isTimelineMode&&/*#__PURE__*/React.createElement(Suspense,{fallback:/*#__PURE__*/React.createElement(\"div\",null)},/*#__PURE__*/React.createElement(Timeline,{setIsTimelineMode:setIsTimelineMode,setDate:setDate,dates:dates}))));};export default ActionsPanel;","map":{"version":3,"sources":["/home/ubuntu/myprojectdir/tracker/covid19india-react/src/components/ActionsPanel.js"],"names":["parse","format","utcToZonedTime","React","useMemo","useCallback","lazy","Suspense","Icon","useSpring","animated","Timeline","ActionsPanel","lastViewedLog","newUpdate","isTimelineMode","setIsTimelineMode","showUpdates","setDate","dates","setNewUpdate","setShowUpdates","Bell","BellOff","TimelineIcon","opacity","transform","config","mass","tension","friction","trail","styles","map","element","index","push","animationDelay","getTimeFromMilliseconds","Date","handleClick","interpolate","o","pointerEvents","t"],"mappings":"AAAA,OAAQA,KAAR,CAAeC,MAAf,KAA4B,UAA5B,CACA,OAAQC,cAAR,KAA6B,aAA7B,CACA,MAAOC,CAAAA,KAAP,EAAeC,OAAf,CAAwBC,WAAxB,CAAqCC,IAArC,CAA2CC,QAA3C,KAA0D,OAA1D,CACA,MAAO,GAAKC,CAAAA,IAAZ,KAAsB,eAAtB,CACA,OAAQC,SAAR,CAAmBC,QAAnB,KAAkC,cAAlC,CAEA,GAAMC,CAAAA,QAAQ,CAAGL,IAAI,CAAC,iBAAM,QAAO,YAAP,CAAN,EAAD,CAArB,CAEA,GAAMM,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAUf,IATJC,CAAAA,aASI,MATJA,aASI,CARJC,SAQI,MARJA,SAQI,CAPJC,cAOI,MAPJA,cAOI,CANJC,iBAMI,MANJA,iBAMI,CALJC,WAKI,MALJA,WAKI,CAJJC,OAII,MAJJA,OAII,CAHJC,KAGI,MAHJA,KAGI,CAFJC,YAEI,MAFJA,YAEI,CADJC,cACI,MADJA,cACI,CACJ,GAAMC,CAAAA,IAAI,CAAGlB,OAAO,CAClB,8BACE,oBAAC,IAAD,CAAM,IAAN,EACE,OAAO,CAAE,kBAAM,CACbiB,cAAc,CAAC,CAACJ,WAAF,CAAd,CACAG,YAAY,CAAC,KAAD,CAAZ,CACD,CAJH,EADF,EADkB,CASlB,CAACA,YAAD,CAAeC,cAAf,CAA+BJ,WAA/B,CATkB,CAApB,CAYA,GAAMM,CAAAA,OAAO,CAAGnB,OAAO,CACrB,8BACE,oBAAC,IAAD,CAAM,OAAN,EACE,OAAO,CAAE,kBAAM,CACbiB,cAAc,CAAC,CAACJ,WAAF,CAAd,CACD,CAHH,EADF,EADqB,CAQrB,CAACI,cAAD,CAAiBJ,WAAjB,CARqB,CAAvB,CAWA,GAAMO,CAAAA,YAAY,CAAGpB,OAAO,CAC1B,8BACE,2BACE,KAAK,CAAC,4BADR,CAEE,OAAO,CAAC,eAFV,CAGE,KAAK,CAAC,IAHR,CAIE,MAAM,CAAC,IAJT,eAME,4BACE,QAAQ,CAAC,SADX,CAEE,CAAC,CAAC,qSAFJ,EANF,CADF,EAD0B,CAoB1B,EApB0B,CAA5B,CAxBI,eA+CyBK,SAAS,CAAC,CACrCgB,OAAO,CAAEV,cAAc,CAAG,CAAH,CAAO,CADO,CAErCW,SAAS,sCAAgCX,cAAc,CAAG,GAAH,CAAS,CAAvD,QAF4B,CAGrCY,MAAM,CAAE,CAACC,IAAI,CAAE,CAAP,CAAUC,OAAO,CAAE,GAAnB,CAAwBC,QAAQ,CAAE,EAAlC,CAH6B,CAAD,CA/ClC,CA+CGJ,SA/CH,YA+CGA,SA/CH,CA+CcD,OA/Cd,YA+CcA,OA/Cd,CAqDJ,GAAMM,CAAAA,KAAK,CAAG3B,OAAO,CAAC,UAAM,CAC1B,GAAM4B,CAAAA,MAAM,CAAG,EAAf,CAEA,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,EAAUC,GAAV,CAAc,SAACC,OAAD,CAAUC,KAAV,CAAoB,CAChCH,MAAM,CAACI,IAAP,CAAY,CACVC,cAAc,WAAK,IAAMF,KAAK,CAAG,GAAnB,MADJ,CAAZ,EAGA,MAAO,KAAP,CACD,CALD,EAMA,MAAOH,CAAAA,MAAP,CACD,CAVoB,CAUlB,EAVkB,CAArB,CAYA,GAAMM,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,CAACzB,aAAD,CAAmB,CACjD,MAAOZ,CAAAA,MAAM,CACXC,cAAc,CAACF,KAAK,CAACa,aAAD,CAAgB,GAAhB,CAAqB,GAAI0B,CAAAA,IAAJ,EAArB,CAAN,CAAwC,cAAxC,CADH,CAEX,WAFW,CAAb,CAID,CALD,CAOA,GAAMC,CAAAA,WAAW,CAAGnC,WAAW,CAAC,UAAM,CACpCW,iBAAiB,CAAC,IAAD,CAAjB,CACA,GAAIC,WAAJ,CAAiBI,cAAc,CAAC,CAACJ,WAAF,CAAd,CAClB,CAH8B,CAG5B,CAACD,iBAAD,CAAoBK,cAApB,CAAoCJ,WAApC,CAH4B,CAA/B,CAKA,mBACE,oBAAC,KAAD,CAAO,QAAP,mBACE,oBAAC,QAAD,CAAU,GAAV,EACE,SAAS,CAAC,SADZ,CAEE,KAAK,CAAE,CACLQ,OAAO,CAAEA,OAAO,CAACgB,WAAR,CAAoB,SAACC,CAAD,QAAO,GAAIA,CAAX,EAApB,CADJ,CAELhB,SAAS,CAATA,SAFK,CAGLiB,aAAa,CAAE5B,cAAc,CAAG,MAAH,CAAY,EAHpC,CAFT,eAQE,0BAAI,SAAS,CAAC,UAAd,CAAyB,KAAK,CAAEgB,KAAK,CAAC,CAAD,CAArC,YAA8CO,uBAAuB,CACnEzB,aADmE,CAArE,SARF,cAYE,2BAAK,SAAS,CAAC,oBAAf,CAAoC,KAAK,CAAEkB,KAAK,CAAC,CAAD,CAAhD,EACG,CAACd,WAAD,CAAeK,IAAf,CAAsBC,OADzB,CAEGT,SAAS,eAAI,2BAAK,SAAS,CAAC,WAAf,EAFhB,CAZF,cAiBE,2BACE,SAAS,CAAC,wBADZ,CAEE,OAAO,CAAE0B,WAFX,CAGE,KAAK,CAAET,KAAK,CAAC,CAAD,CAHd,EAKGP,YALH,CAjBF,CADF,cA2BE,oBAAC,QAAD,CAAU,GAAV,EACE,SAAS,CAAC,kBADZ,CAEE,KAAK,CAAE,CACLC,OAAO,CAAPA,OADK,CAELC,SAAS,CAAEA,SAAS,CAACe,WAAV,CAAsB,SAACG,CAAD,kBAAUA,CAAV,sBAAtB,CAFN,CAGLD,aAAa,CAAE,CAAC5B,cAAD,CAAkB,MAAlB,CAA2B,EAHrC,CAFT,EAQGA,cAAc,eACb,oBAAC,QAAD,EAAU,QAAQ,cAAE,+BAApB,eACE,oBAAC,QAAD,CAAc,CAACC,iBAAiB,CAAjBA,iBAAD,CAAoBE,OAAO,CAAPA,OAApB,CAA6BC,KAAK,CAALA,KAA7B,CAAd,CADF,CATJ,CA3BF,CADF,CA4CD,CAnID,CAqIA,cAAeP,CAAAA,YAAf","sourcesContent":["import {parse, format} from 'date-fns';\nimport {utcToZonedTime} from 'date-fns-tz';\nimport React, {useMemo, useCallback, lazy, Suspense} from 'react';\nimport * as Icon from 'react-feather';\nimport {useSpring, animated} from 'react-spring';\n\nconst Timeline = lazy(() => import('./Timeline'));\n\nconst ActionsPanel = ({\n  lastViewedLog,\n  newUpdate,\n  isTimelineMode,\n  setIsTimelineMode,\n  showUpdates,\n  setDate,\n  dates,\n  setNewUpdate,\n  setShowUpdates,\n}) => {\n  const Bell = useMemo(\n    () => (\n      <Icon.Bell\n        onClick={() => {\n          setShowUpdates(!showUpdates);\n          setNewUpdate(false);\n        }}\n      />\n    ),\n    [setNewUpdate, setShowUpdates, showUpdates]\n  );\n\n  const BellOff = useMemo(\n    () => (\n      <Icon.BellOff\n        onClick={() => {\n          setShowUpdates(!showUpdates);\n        }}\n      />\n    ),\n    [setShowUpdates, showUpdates]\n  );\n\n  const TimelineIcon = useMemo(\n    () => (\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"-.2 -.2 17 17\"\n        width=\"16\"\n        height=\"16\"\n      >\n        <path\n          fillRule=\"evenodd\"\n          d=\"M1.643 3.143L.427 1.927A.25.25 0 000 2.104V5.75c0\n          .138.112.25.25.25h3.646a.25.25 0 00.177-.427L2.715\n          4.215a6.5 6.5 0 11-1.18 4.458.75.75 0 10-1.493.154\n          8.001 8.001 0 101.6-5.684zM7.75 4a.75.75 0\n          01.75.75v2.992l2.028.812a.75.75 0 01-.557\n          1.392l-2.5-1A.75.75 0 017 8.25v-3.5A.75.75\n          0 017.75 4z\"\n        ></path>\n      </svg>\n    ),\n    []\n  );\n\n  const {transform, opacity} = useSpring({\n    opacity: isTimelineMode ? 1 : 0,\n    transform: `perspective(600px) rotateX(${isTimelineMode ? 180 : 0}deg)`,\n    config: {mass: 5, tension: 500, friction: 80},\n  });\n\n  const trail = useMemo(() => {\n    const styles = [];\n\n    [0, 0, 0].map((element, index) => {\n      styles.push({\n        animationDelay: `${500 + index * 250}ms`,\n      });\n      return null;\n    });\n    return styles;\n  }, []);\n\n  const getTimeFromMilliseconds = (lastViewedLog) => {\n    return format(\n      utcToZonedTime(parse(lastViewedLog, 'T', new Date()), 'Asia/Kolkata'),\n      'dd MMM, p'\n    );\n  };\n\n  const handleClick = useCallback(() => {\n    setIsTimelineMode(true);\n    if (showUpdates) setShowUpdates(!showUpdates);\n  }, [setIsTimelineMode, setShowUpdates, showUpdates]);\n\n  return (\n    <React.Fragment>\n      <animated.div\n        className=\"actions\"\n        style={{\n          opacity: opacity.interpolate((o) => 1 - o),\n          transform,\n          pointerEvents: isTimelineMode ? 'none' : '',\n        }}\n      >\n        <h5 className=\"fadeInUp\" style={trail[0]}>{`${getTimeFromMilliseconds(\n          lastViewedLog\n        )} IST`}</h5>\n\n        <div className=\"bell-icon fadeInUp\" style={trail[1]}>\n          {!showUpdates ? Bell : BellOff}\n          {newUpdate && <div className=\"indicator\"></div>}\n        </div>\n\n        <div\n          className=\"timeline-icon fadeInUp\"\n          onClick={handleClick}\n          style={trail[2]}\n        >\n          {TimelineIcon}\n        </div>\n      </animated.div>\n\n      <animated.div\n        className=\"actions timeline\"\n        style={{\n          opacity,\n          transform: transform.interpolate((t) => `${t} rotateX(180deg)`),\n          pointerEvents: !isTimelineMode ? 'none' : '',\n        }}\n      >\n        {isTimelineMode && (\n          <Suspense fallback={<div />}>\n            <Timeline {...{setIsTimelineMode, setDate, dates}} />\n          </Suspense>\n        )}\n      </animated.div>\n    </React.Fragment>\n  );\n};\n\nexport default ActionsPanel;\n"]},"metadata":{},"sourceType":"module"}