{"ast":null,"code":"import _objectSpread from\"/home/ubuntu/myprojectdir/tracker/covid19india-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/home/ubuntu/myprojectdir/tracker/covid19india-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _slicedToArray from\"/home/ubuntu/myprojectdir/tracker/covid19india-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import produce from'immer';import{useState}from'react';import{useUpdateEffect}from'react-use';import useSWR from'swr';export function useStickySWR(key,fetcher,swrOptions){var _useState=useState(swrOptions),_useState2=_slicedToArray(_useState,2),options=_useState2[0],setOptions=_useState2[1];for(var _len=arguments.length,args=new Array(_len>3?_len-3:0),_key=3;_key<_len;_key++){args[_key-3]=arguments[_key];}var _useSWR=useSWR.apply(void 0,[key,fetcher,options].concat(args)),data=_useSWR.data,isValidating=_useSWR.isValidating,error=_useSWR.error,rest=_objectWithoutProperties(_useSWR,[\"data\",\"isValidating\",\"error\"]);useUpdateEffect(function(){setOptions(produce(options,function(draftOptions){draftOptions.initialData=data;}));},[data]);return _objectSpread(_objectSpread({},rest),{},{isValidating:isValidating,error:error,data:data});}export default useStickySWR;","map":{"version":3,"sources":["/home/ubuntu/myprojectdir/tracker/covid19india-react/src/hooks/useStickySWR.js"],"names":["produce","useState","useUpdateEffect","useSWR","useStickySWR","key","fetcher","swrOptions","options","setOptions","args","data","isValidating","error","rest","draftOptions","initialData"],"mappings":"ohBAAA,MAAOA,CAAAA,OAAP,KAAoB,OAApB,CACA,OAAQC,QAAR,KAAuB,OAAvB,CACA,OAAQC,eAAR,KAA8B,WAA9B,CACA,MAAOC,CAAAA,MAAP,KAAmB,KAAnB,CAEA,MAAO,SAASC,CAAAA,YAAT,CAAsBC,GAAtB,CAA2BC,OAA3B,CAAoCC,UAApC,CAAyD,eAChCN,QAAQ,CAACM,UAAD,CADwB,wCACvDC,OADuD,eAC9CC,UAD8C,6CAANC,IAAM,qDAANA,IAAM,sCAGjBP,MAAM,MAAN,SAC3CE,GAD2C,CAE3CC,OAF2C,CAG3CE,OAH2C,SAIxCE,IAJwC,EAHiB,CAGvDC,IAHuD,SAGvDA,IAHuD,CAGjDC,YAHiD,SAGjDA,YAHiD,CAGnCC,KAHmC,SAGnCA,KAHmC,CAGzBC,IAHyB,mEAU9DZ,eAAe,CAAC,UAAM,CACpBO,UAAU,CACRT,OAAO,CAACQ,OAAD,CAAU,SAACO,YAAD,CAAkB,CACjCA,YAAY,CAACC,WAAb,CAA2BL,IAA3B,CACD,CAFM,CADC,CAAV,CAKD,CANc,CAMZ,CAACA,IAAD,CANY,CAAf,CAQA,sCACKG,IADL,MAEEF,YAAY,CAAZA,YAFF,CAGEC,KAAK,CAALA,KAHF,CAIEF,IAAI,CAAJA,IAJF,GAMD,CAED,cAAeP,CAAAA,YAAf","sourcesContent":["import produce from 'immer';\nimport {useState} from 'react';\nimport {useUpdateEffect} from 'react-use';\nimport useSWR from 'swr';\n\nexport function useStickySWR(key, fetcher, swrOptions, ...args) {\n  const [options, setOptions] = useState(swrOptions);\n\n  const {data, isValidating, error, ...rest} = useSWR(\n    key,\n    fetcher,\n    options,\n    ...args\n  );\n\n  useUpdateEffect(() => {\n    setOptions(\n      produce(options, (draftOptions) => {\n        draftOptions.initialData = data;\n      })\n    );\n  }, [data]);\n\n  return {\n    ...rest,\n    isValidating,\n    error,\n    data,\n  };\n}\n\nexport default useStickySWR;\n"]},"metadata":{},"sourceType":"module"}