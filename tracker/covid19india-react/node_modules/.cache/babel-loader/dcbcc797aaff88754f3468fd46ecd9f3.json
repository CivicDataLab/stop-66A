{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/myprojectdir/tracker/covid19india-react/src/components/MapExplorer.js\";\nimport MapVisualizerLoader from './loaders/MapVisualizer';\nimport { MAP_META, MAP_TYPES, MAP_VIEWS, MAP_VIZS, PRIMARY_STATISTICS, SPRING_CONFIG_NUMBERS, STATE_NAMES, STATISTIC_CONFIGS, UNKNOWN_DISTRICT_KEY } from '../constants';\nimport { formatNumber, getStatistic, capitalize } from '../utils/commonFunctions';\nimport { DotFillIcon, ArrowLeftIcon, OrganizationIcon } from '@primer/octicons-v2-react';\nimport classnames from 'classnames';\nimport equal from 'fast-deep-equal';\nimport produce from 'immer';\nimport React, { useCallback, useEffect, useMemo, useRef, useState, Suspense, lazy } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useHistory } from 'react-router-dom';\nimport { animated, useSpring } from 'react-spring';\nimport { useSwipeable } from 'react-swipeable';\nimport { useWindowSize } from 'react-use';\nconst MapVisualizer = lazy(() => import('./MapVisualizer'));\n\nfunction MapExplorer({\n  stateCode: mapCode = 'TT',\n  data,\n  mapStatistic,\n  setMapStatistic,\n  regionHighlighted,\n  setRegionHighlighted,\n  anchor,\n  setAnchor,\n  expandTable\n}) {\n  var _mapExplorerRef$curre;\n\n  const {\n    t\n  } = useTranslation();\n  const mapExplorerRef = useRef();\n  const {\n    width\n  } = useWindowSize();\n  const [mapView, setMapView] = useState(MAP_VIEWS.DISTRICTS);\n  const [mapViz, setMapViz] = useState(MAP_META[mapCode].mapType === MAP_TYPES.COUNTRY ? MAP_VIZS.BUBBLES : MAP_VIZS.CHOROPLETH);\n  const mapMeta = MAP_META[mapCode];\n  const mapData = mapMeta.mapType === MAP_TYPES.COUNTRY ? data : {\n    [mapCode]: data[mapCode]\n  };\n  const hoveredRegion = useMemo(() => {\n    var _data$regionHighlight, _data$regionHighlight2;\n\n    const hoveredData = (regionHighlighted.districtName ? (_data$regionHighlight = data[regionHighlighted.stateCode]) === null || _data$regionHighlight === void 0 ? void 0 : (_data$regionHighlight2 = _data$regionHighlight.districts) === null || _data$regionHighlight2 === void 0 ? void 0 : _data$regionHighlight2[regionHighlighted.districtName] : data[regionHighlighted.stateCode]) || {};\n    return produce(hoveredData, draft => {\n      draft.name = regionHighlighted.districtName || STATE_NAMES[regionHighlighted.stateCode];\n    });\n  }, [data, regionHighlighted.stateCode, regionHighlighted.districtName]);\n  const handleTabClick = useCallback(option => {\n    switch (option) {\n      case MAP_VIZS.CHOROPLETH:\n        setMapViz(MAP_VIZS.CHOROPLETH);\n        return;\n\n      case MAP_VIZS.BUBBLES:\n        setMapViz(MAP_VIZS.BUBBLES);\n        return;\n\n      default:\n        return;\n    }\n  }, [setMapViz]);\n  const handleDistrictClick = useCallback(() => {\n    const newMapView = mapView === MAP_VIEWS.DISTRICTS ? MAP_VIEWS.STATES : MAP_VIEWS.DISTRICTS;\n\n    if (newMapView === MAP_VIEWS.STATES) {\n      setRegionHighlighted({\n        stateCode: regionHighlighted.stateCode,\n        districtName: null\n      });\n    }\n\n    setMapView(newMapView);\n  }, [mapView, setRegionHighlighted, regionHighlighted.stateCode]);\n  const ChoroplethIcon = useMemo(() => /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"314\",\n    height: \"314\",\n    viewBox: \"0 0 314 314\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M78.2861 145.778C80.6671 155.387 84.6108 164.28 92.421 170.488C94.5409 174.766 93.7381 180.115 96.2412 184.535C99.7619 190.751 102.898 195.156 110.758 195.156C119.259 195.156 127.582 192.241 132.576 184.963C136.539 179.187 143.562 174.194 150.658 178.968C156.039 182.587 157.864 191.253 161.949 196.312C168.044 203.859 175.962 212.131 184.107 217.339C190.795 221.615 199.602 221.297 207.368 220.551C214.111 219.903 220.088 212.137 223.71 207.189C227.102 202.555 230.602 198.075 233.006 192.843C238.463 180.961 236.721 162.008 225.62 153.958C213.23 144.974 196.881 145.725 183.343 139.654C175.796 136.27 175.843 122.587 174.174 115.758C172.492 108.876 170.655 99.867 164.581 95.3733C155.36 88.5509 146.436 93.7458 137.075 96.444C133.325 97.525 131.816 100.817 129.095 103.424L129.093 103.426C126.105 106.29 121.531 110.674 117.974 112.632C113.709 114.979 111.262 119.456 105.834 119.612C104.487 119.651 98.6801 120.375 97.7693 119.227C94.2704 114.814 92.1979 113.445 86.6906 113.445C83.0636 113.445 77.14 118.241 77.14 122.31C77.14 130.086 76.4094 138.205 78.2861 145.778Z\",\n    strokeWidth: \"10\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  })), []);\n  const BubblesIcon = useMemo(() => /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"22\",\n    height: \"27\",\n    viewBox: \"-1 -5 22 27\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"5.5\",\n    cy: \"5.5\",\n    r: \"5.5\",\n    fillOpacity: \"0.4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"5.5\",\n    cy: \"5.5\",\n    r: \"5\",\n    strokeOpacity: \"0.5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"6.5\",\n    cy: \"11.5\",\n    r: \"3.5\",\n    fillOpacity: \"0.4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"6.5\",\n    cy: \"11.5\",\n    r: \"3\",\n    strokeOpacity: \"0.5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"13.5\",\n    cy: \"9.5\",\n    r: \"6.5\",\n    fillOpacity: \"0.4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"13.5\",\n    cy: \"9.5\",\n    r: \"6\",\n    strokeOpacity: \"0.5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  })), []);\n  const history = useHistory();\n  const panelRef = useRef();\n  useEffect(() => {\n    if (history.location.hash === '#MapExplorer') {\n      panelRef.current.scrollIntoView();\n    }\n  }, [history]);\n  const trail = useMemo(() => {\n    const styles = [];\n    [0, 0, 0, 0, 0, 0, 0].map((element, index) => {\n      styles.push({\n        animationDelay: `${index * 250}ms`\n      });\n      return null;\n    });\n    return styles;\n  }, []);\n  const spring = useSpring({\n    total: getStatistic(hoveredRegion, 'total', mapStatistic),\n    config: {\n      tension: 250,\n      ...SPRING_CONFIG_NUMBERS\n    }\n  });\n  const swipeHandlers = useSwipeable({\n    onSwipedRight: () => {\n      const currentIndex = PRIMARY_STATISTICS.indexOf(mapStatistic);\n      const toIndex = currentIndex > 0 ? currentIndex - 1 : PRIMARY_STATISTICS.length - 1;\n      setMapStatistic(PRIMARY_STATISTICS[toIndex]);\n    },\n    onSwipedLeft: () => {\n      const currentIndex = PRIMARY_STATISTICS.indexOf(mapStatistic);\n      const toIndex = currentIndex < PRIMARY_STATISTICS.length - 1 ? currentIndex + 1 : 0;\n      setMapStatistic(PRIMARY_STATISTICS[toIndex]);\n    }\n  });\n  const statisticConfig = STATISTIC_CONFIGS[mapStatistic];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classnames('MapExplorer', {\n      stickied: anchor === 'mapexplorer'\n    }, {\n      hidden: anchor && (!expandTable || width < 769) && anchor !== 'mapexplorer'\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel\",\n    ref: panelRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel-left fadeInUp\",\n    style: trail[0],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: classnames(mapStatistic),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 11\n    }\n  }, t(hoveredRegion.name), hoveredRegion.name === UNKNOWN_DISTRICT_KEY && ` [${t(STATE_NAMES[regionHighlighted.stateCode])}]`), regionHighlighted.stateCode && /*#__PURE__*/React.createElement(\"h1\", {\n    className: classnames('district', mapStatistic),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(animated.div, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 15\n    }\n  }, spring.total.interpolate(total => formatNumber(total, statisticConfig.format !== 'short' ? statisticConfig.format : 'int', mapStatistic))), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 15\n    }\n  }, t(capitalize(statisticConfig.displayName))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classnames('panel-right', `is-${mapStatistic}`),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"switch-type\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classnames('choropleth fadeInUp', {\n      'is-highlighted': mapViz === MAP_VIZS.CHOROPLETH\n    }),\n    onClick: handleTabClick.bind(this, MAP_VIZS.CHOROPLETH),\n    style: trail[1],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }\n  }, ChoroplethIcon), /*#__PURE__*/React.createElement(\"div\", {\n    className: classnames('bubble fadeInUp', {\n      'is-highlighted': mapViz === MAP_VIZS.BUBBLES\n    }),\n    onClick: handleTabClick.bind(this, MAP_VIZS.BUBBLES),\n    style: trail[2],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 13\n    }\n  }, BubblesIcon), mapMeta.mapType === MAP_TYPES.COUNTRY && /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"divider\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classnames('boundary fadeInUp', {\n      'is-highlighted': mapView === MAP_VIEWS.DISTRICTS\n    }),\n    onClick: handleDistrictClick.bind(this),\n    style: trail[3],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(OrganizationIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 19\n    }\n  }))), mapMeta.mapType === MAP_TYPES.STATE && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"back fadeInUp\",\n    onClick: () => {\n      history.push('/#MapExplorer');\n    },\n    style: trail[4],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ArrowLeftIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 17\n    }\n  }))), (expandTable || width < 769) && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"switch-statistic fadeInUp\",\n    style: trail[5],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 13\n    }\n  }, PRIMARY_STATISTICS.map(statistic => /*#__PURE__*/React.createElement(\"div\", {\n    key: statistic,\n    className: classnames('statistic-option', `is-${statistic}`, {\n      'is-highlighted': mapStatistic === statistic\n    }),\n    onClick: setMapStatistic.bind(this, statistic),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(DotFillIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 19\n    }\n  })))))), /*#__PURE__*/React.createElement(\"div\", Object.assign({\n    ref: mapExplorerRef,\n    className: \"fadeInUp\",\n    style: trail[3]\n  }, swipeHandlers, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 7\n    }\n  }), mapStatistic && /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(MapVisualizerLoader, Object.assign({\n      className: \"map-loader\"\n    }, {\n      width: (_mapExplorerRef$curre = mapExplorerRef.current) === null || _mapExplorerRef$curre === void 0 ? void 0 : _mapExplorerRef$curre.clientWidth,\n      statistic: mapStatistic\n    }, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 15\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MapVisualizer, Object.assign({\n    mapCode,\n    mapView,\n    mapViz\n  }, {\n    data: mapData\n  }, {\n    regionHighlighted,\n    setRegionHighlighted\n  }, {\n    statistic: mapStatistic,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 13\n    }\n  })))));\n}\n\nconst isEqual = (prevProps, currProps) => {\n  var _prevProps$data, _prevProps$data$TT, _prevProps$data$TT$me, _currProps$data, _currProps$data$TT, _currProps$data$TT$me, _prevProps$data2, _prevProps$data2$TT, _currProps$data2, _currProps$data2$TT;\n\n  if (!equal(prevProps.stateCode, currProps.stateCode)) {\n    return false;\n  } else if (!equal(prevProps.regionHighlighted, currProps.regionHighlighted)) {\n    return false;\n  } else if (!equal(prevProps.mapStatistic, currProps.mapStatistic)) {\n    return false;\n  } else if (!equal(prevProps.anchor, currProps.anchor)) {\n    return false;\n  } else if (!equal(prevProps.expandTable, currProps.expandTable)) {\n    return false;\n  } else if (!equal((_prevProps$data = prevProps.data) === null || _prevProps$data === void 0 ? void 0 : (_prevProps$data$TT = _prevProps$data.TT) === null || _prevProps$data$TT === void 0 ? void 0 : (_prevProps$data$TT$me = _prevProps$data$TT.meta) === null || _prevProps$data$TT$me === void 0 ? void 0 : _prevProps$data$TT$me['last_updated'], (_currProps$data = currProps.data) === null || _currProps$data === void 0 ? void 0 : (_currProps$data$TT = _currProps$data.TT) === null || _currProps$data$TT === void 0 ? void 0 : (_currProps$data$TT$me = _currProps$data$TT.meta) === null || _currProps$data$TT$me === void 0 ? void 0 : _currProps$data$TT$me['last_updated'])) {\n    return false;\n  } else if (!equal((_prevProps$data2 = prevProps.data) === null || _prevProps$data2 === void 0 ? void 0 : (_prevProps$data2$TT = _prevProps$data2.TT) === null || _prevProps$data2$TT === void 0 ? void 0 : _prevProps$data2$TT.total, (_currProps$data2 = currProps.data) === null || _currProps$data2 === void 0 ? void 0 : (_currProps$data2$TT = _currProps$data2.TT) === null || _currProps$data2$TT === void 0 ? void 0 : _currProps$data2$TT.total)) {\n    return false;\n  }\n\n  return true;\n};\n\nexport default React.memo(MapExplorer, isEqual);","map":{"version":3,"sources":["/home/ubuntu/myprojectdir/tracker/covid19india-react/src/components/MapExplorer.js"],"names":["MapVisualizerLoader","MAP_META","MAP_TYPES","MAP_VIEWS","MAP_VIZS","PRIMARY_STATISTICS","SPRING_CONFIG_NUMBERS","STATE_NAMES","STATISTIC_CONFIGS","UNKNOWN_DISTRICT_KEY","formatNumber","getStatistic","capitalize","DotFillIcon","ArrowLeftIcon","OrganizationIcon","classnames","equal","produce","React","useCallback","useEffect","useMemo","useRef","useState","Suspense","lazy","useTranslation","useHistory","animated","useSpring","useSwipeable","useWindowSize","MapVisualizer","MapExplorer","stateCode","mapCode","data","mapStatistic","setMapStatistic","regionHighlighted","setRegionHighlighted","anchor","setAnchor","expandTable","t","mapExplorerRef","width","mapView","setMapView","DISTRICTS","mapViz","setMapViz","mapType","COUNTRY","BUBBLES","CHOROPLETH","mapMeta","mapData","hoveredRegion","hoveredData","districtName","districts","draft","name","handleTabClick","option","handleDistrictClick","newMapView","STATES","ChoroplethIcon","BubblesIcon","history","panelRef","location","hash","current","scrollIntoView","trail","styles","map","element","index","push","animationDelay","spring","total","config","tension","swipeHandlers","onSwipedRight","currentIndex","indexOf","toIndex","length","onSwipedLeft","statisticConfig","stickied","hidden","interpolate","format","displayName","bind","STATE","statistic","clientWidth","isEqual","prevProps","currProps","TT","meta","memo"],"mappings":"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","sourcesContent":["import MapVisualizerLoader from './loaders/MapVisualizer';\n\nimport {\n  MAP_META,\n  MAP_TYPES,\n  MAP_VIEWS,\n  MAP_VIZS,\n  PRIMARY_STATISTICS,\n  SPRING_CONFIG_NUMBERS,\n  STATE_NAMES,\n  STATISTIC_CONFIGS,\n  UNKNOWN_DISTRICT_KEY,\n} from '../constants';\nimport {formatNumber, getStatistic, capitalize} from '../utils/commonFunctions';\n\nimport {\n  DotFillIcon,\n  ArrowLeftIcon,\n  OrganizationIcon,\n} from '@primer/octicons-v2-react';\nimport classnames from 'classnames';\nimport equal from 'fast-deep-equal';\nimport produce from 'immer';\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n  Suspense,\n  lazy,\n} from 'react';\nimport {useTranslation} from 'react-i18next';\nimport {useHistory} from 'react-router-dom';\nimport {animated, useSpring} from 'react-spring';\nimport {useSwipeable} from 'react-swipeable';\nimport {useWindowSize} from 'react-use';\n\nconst MapVisualizer = lazy(() => import('./MapVisualizer'));\n\nfunction MapExplorer({\n  stateCode: mapCode = 'TT',\n  data,\n  mapStatistic,\n  setMapStatistic,\n  regionHighlighted,\n  setRegionHighlighted,\n  anchor,\n  setAnchor,\n  expandTable,\n}) {\n  const {t} = useTranslation();\n  const mapExplorerRef = useRef();\n  const {width} = useWindowSize();\n\n  const [mapView, setMapView] = useState(MAP_VIEWS.DISTRICTS);\n  const [mapViz, setMapViz] = useState(\n    MAP_META[mapCode].mapType === MAP_TYPES.COUNTRY\n      ? MAP_VIZS.BUBBLES\n      : MAP_VIZS.CHOROPLETH\n  );\n\n  const mapMeta = MAP_META[mapCode];\n  const mapData =\n    mapMeta.mapType === MAP_TYPES.COUNTRY ? data : {[mapCode]: data[mapCode]};\n\n  const hoveredRegion = useMemo(() => {\n    const hoveredData =\n      (regionHighlighted.districtName\n        ? data[regionHighlighted.stateCode]?.districts?.[\n            regionHighlighted.districtName\n          ]\n        : data[regionHighlighted.stateCode]) || {};\n\n    return produce(hoveredData, (draft) => {\n      draft.name =\n        regionHighlighted.districtName ||\n        STATE_NAMES[regionHighlighted.stateCode];\n    });\n  }, [data, regionHighlighted.stateCode, regionHighlighted.districtName]);\n\n  const handleTabClick = useCallback(\n    (option) => {\n      switch (option) {\n        case MAP_VIZS.CHOROPLETH:\n          setMapViz(MAP_VIZS.CHOROPLETH);\n          return;\n\n        case MAP_VIZS.BUBBLES:\n          setMapViz(MAP_VIZS.BUBBLES);\n          return;\n\n        default:\n          return;\n      }\n    },\n    [setMapViz]\n  );\n\n  const handleDistrictClick = useCallback(() => {\n    const newMapView =\n      mapView === MAP_VIEWS.DISTRICTS ? MAP_VIEWS.STATES : MAP_VIEWS.DISTRICTS;\n    if (newMapView === MAP_VIEWS.STATES) {\n      setRegionHighlighted({\n        stateCode: regionHighlighted.stateCode,\n        districtName: null,\n      });\n    }\n    setMapView(newMapView);\n  }, [mapView, setRegionHighlighted, regionHighlighted.stateCode]);\n\n  const ChoroplethIcon = useMemo(\n    () => (\n      <svg\n        width=\"314\"\n        height=\"314\"\n        viewBox=\"0 0 314 314\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          d=\"M78.2861 145.778C80.6671 155.387 84.6108 164.28 92.421 170.488C94.5409 174.766 93.7381 180.115 96.2412 184.535C99.7619 190.751 102.898 195.156 110.758 195.156C119.259 195.156 127.582 192.241 132.576 184.963C136.539 179.187 143.562 174.194 150.658 178.968C156.039 182.587 157.864 191.253 161.949 196.312C168.044 203.859 175.962 212.131 184.107 217.339C190.795 221.615 199.602 221.297 207.368 220.551C214.111 219.903 220.088 212.137 223.71 207.189C227.102 202.555 230.602 198.075 233.006 192.843C238.463 180.961 236.721 162.008 225.62 153.958C213.23 144.974 196.881 145.725 183.343 139.654C175.796 136.27 175.843 122.587 174.174 115.758C172.492 108.876 170.655 99.867 164.581 95.3733C155.36 88.5509 146.436 93.7458 137.075 96.444C133.325 97.525 131.816 100.817 129.095 103.424L129.093 103.426C126.105 106.29 121.531 110.674 117.974 112.632C113.709 114.979 111.262 119.456 105.834 119.612C104.487 119.651 98.6801 120.375 97.7693 119.227C94.2704 114.814 92.1979 113.445 86.6906 113.445C83.0636 113.445 77.14 118.241 77.14 122.31C77.14 130.086 76.4094 138.205 78.2861 145.778Z\"\n          strokeWidth=\"10\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        />\n      </svg>\n    ),\n    []\n  );\n\n  const BubblesIcon = useMemo(\n    () => (\n      <svg\n        width=\"22\"\n        height=\"27\"\n        viewBox=\"-1 -5 22 27\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <circle cx=\"5.5\" cy=\"5.5\" r=\"5.5\" fillOpacity=\"0.4\" />\n        <circle cx=\"5.5\" cy=\"5.5\" r=\"5\" strokeOpacity=\"0.5\" />\n        <circle cx=\"6.5\" cy=\"11.5\" r=\"3.5\" fillOpacity=\"0.4\" />\n        <circle cx=\"6.5\" cy=\"11.5\" r=\"3\" strokeOpacity=\"0.5\" />\n        <circle cx=\"13.5\" cy=\"9.5\" r=\"6.5\" fillOpacity=\"0.4\" />\n        <circle cx=\"13.5\" cy=\"9.5\" r=\"6\" strokeOpacity=\"0.5\" />\n      </svg>\n    ),\n    []\n  );\n\n  const history = useHistory();\n  const panelRef = useRef();\n\n  useEffect(() => {\n    if (history.location.hash === '#MapExplorer') {\n      panelRef.current.scrollIntoView();\n    }\n  }, [history]);\n\n  const trail = useMemo(() => {\n    const styles = [];\n\n    [0, 0, 0, 0, 0, 0, 0].map((element, index) => {\n      styles.push({\n        animationDelay: `${index * 250}ms`,\n      });\n      return null;\n    });\n\n    return styles;\n  }, []);\n\n  const spring = useSpring({\n    total: getStatistic(hoveredRegion, 'total', mapStatistic),\n    config: {tension: 250, ...SPRING_CONFIG_NUMBERS},\n  });\n\n  const swipeHandlers = useSwipeable({\n    onSwipedRight: () => {\n      const currentIndex = PRIMARY_STATISTICS.indexOf(mapStatistic);\n      const toIndex =\n        currentIndex > 0 ? currentIndex - 1 : PRIMARY_STATISTICS.length - 1;\n      setMapStatistic(PRIMARY_STATISTICS[toIndex]);\n    },\n    onSwipedLeft: () => {\n      const currentIndex = PRIMARY_STATISTICS.indexOf(mapStatistic);\n      const toIndex =\n        currentIndex < PRIMARY_STATISTICS.length - 1 ? currentIndex + 1 : 0;\n      setMapStatistic(PRIMARY_STATISTICS[toIndex]);\n    },\n  });\n\n  const statisticConfig = STATISTIC_CONFIGS[mapStatistic];\n\n  return (\n    <div\n      className={classnames(\n        'MapExplorer',\n        {stickied: anchor === 'mapexplorer'},\n        {\n          hidden:\n            anchor && (!expandTable || width < 769) && anchor !== 'mapexplorer',\n        }\n      )}\n    >\n      <div className=\"panel\" ref={panelRef}>\n        <div className=\"panel-left fadeInUp\" style={trail[0]}>\n          <h2 className={classnames(mapStatistic)}>\n            {t(hoveredRegion.name)}\n            {hoveredRegion.name === UNKNOWN_DISTRICT_KEY &&\n              ` [${t(STATE_NAMES[regionHighlighted.stateCode])}]`}\n          </h2>\n\n          {regionHighlighted.stateCode && (\n            <h1 className={classnames('district', mapStatistic)}>\n              <animated.div>\n                {spring.total.interpolate((total) =>\n                  formatNumber(\n                    total,\n                    statisticConfig.format !== 'short'\n                      ? statisticConfig.format\n                      : 'int',\n                    mapStatistic\n                  )\n                )}\n              </animated.div>\n              <span>{t(capitalize(statisticConfig.displayName))}</span>\n            </h1>\n          )}\n        </div>\n\n        <div className={classnames('panel-right', `is-${mapStatistic}`)}>\n          <div className=\"switch-type\">\n            <div\n              className={classnames('choropleth fadeInUp', {\n                'is-highlighted': mapViz === MAP_VIZS.CHOROPLETH,\n              })}\n              onClick={handleTabClick.bind(this, MAP_VIZS.CHOROPLETH)}\n              style={trail[1]}\n            >\n              {ChoroplethIcon}\n            </div>\n            <div\n              className={classnames('bubble fadeInUp', {\n                'is-highlighted': mapViz === MAP_VIZS.BUBBLES,\n              })}\n              onClick={handleTabClick.bind(this, MAP_VIZS.BUBBLES)}\n              style={trail[2]}\n            >\n              {BubblesIcon}\n            </div>\n\n            {mapMeta.mapType === MAP_TYPES.COUNTRY && (\n              <React.Fragment>\n                <div className=\"divider\" />\n                <div\n                  className={classnames('boundary fadeInUp', {\n                    'is-highlighted': mapView === MAP_VIEWS.DISTRICTS,\n                  })}\n                  onClick={handleDistrictClick.bind(this)}\n                  style={trail[3]}\n                >\n                  <OrganizationIcon />\n                </div>\n              </React.Fragment>\n            )}\n\n            {mapMeta.mapType === MAP_TYPES.STATE && (\n              <div\n                className=\"back fadeInUp\"\n                onClick={() => {\n                  history.push('/#MapExplorer');\n                }}\n                style={trail[4]}\n              >\n                <ArrowLeftIcon />\n              </div>\n            )}\n          </div>\n\n          {(expandTable || width < 769) && (\n            <div className=\"switch-statistic fadeInUp\" style={trail[5]}>\n              {PRIMARY_STATISTICS.map((statistic) => (\n                <div\n                  key={statistic}\n                  className={classnames('statistic-option', `is-${statistic}`, {\n                    'is-highlighted': mapStatistic === statistic,\n                  })}\n                  onClick={setMapStatistic.bind(this, statistic)}\n                >\n                  <DotFillIcon />\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div\n        ref={mapExplorerRef}\n        className=\"fadeInUp\"\n        style={trail[3]}\n        {...swipeHandlers}\n      >\n        {mapStatistic && (\n          <Suspense\n            fallback={\n              <MapVisualizerLoader\n                className=\"map-loader\"\n                {...{\n                  width: mapExplorerRef.current?.clientWidth,\n                  statistic: mapStatistic,\n                }}\n              />\n            }\n          >\n            <MapVisualizer\n              {...{mapCode, mapView, mapViz}}\n              data={mapData}\n              {...{regionHighlighted, setRegionHighlighted}}\n              statistic={mapStatistic}\n            ></MapVisualizer>\n          </Suspense>\n        )}\n      </div>\n    </div>\n  );\n}\n\nconst isEqual = (prevProps, currProps) => {\n  if (!equal(prevProps.stateCode, currProps.stateCode)) {\n    return false;\n  } else if (!equal(prevProps.regionHighlighted, currProps.regionHighlighted)) {\n    return false;\n  } else if (!equal(prevProps.mapStatistic, currProps.mapStatistic)) {\n    return false;\n  } else if (!equal(prevProps.anchor, currProps.anchor)) {\n    return false;\n  } else if (!equal(prevProps.expandTable, currProps.expandTable)) {\n    return false;\n  } else if (\n    !equal(\n      prevProps.data?.TT?.meta?.['last_updated'],\n      currProps.data?.TT?.meta?.['last_updated']\n    )\n  ) {\n    return false;\n  } else if (!equal(prevProps.data?.TT?.total, currProps.data?.TT?.total)) {\n    return false;\n  }\n  return true;\n};\n\nexport default React.memo(MapExplorer, isEqual);\n"]},"metadata":{},"sourceType":"module"}