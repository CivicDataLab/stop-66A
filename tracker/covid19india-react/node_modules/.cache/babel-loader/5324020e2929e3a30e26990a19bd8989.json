{"ast":null,"code":"import{UPDATES_COUNT}from'../constants';import{capitalize}from'../utils/commonFunctions';import{formatDistance,format}from'date-fns';import React,{useLayoutEffect}from'react';import{Send}from'react-feather';var newDate=new Date();var currentDate=newDate;function Updates(_ref){var updates=_ref.updates;useLayoutEffect(function(){currentDate=newDate;});return/*#__PURE__*/React.createElement(\"div\",{className:\"updates\"},/*#__PURE__*/React.createElement(\"div\",{className:\"updates-header\"},/*#__PURE__*/React.createElement(\"h2\",null,format(currentDate,'d MMM'))),updates.slice(-UPDATES_COUNT).reverse().map(function(activity,index){activity.update=activity.update.replace(/\\n/g,'<br/>');var activityDate=new Date(activity.timestamp*1000);var addHeader=function addHeader(){currentDate=activityDate;return/*#__PURE__*/React.createElement(React.Fragment,null,index===0?/*#__PURE__*/React.createElement(\"div\",{className:\"update\"},/*#__PURE__*/React.createElement(\"h4\",null,\"No updates yet!\")):'',/*#__PURE__*/React.createElement(\"div\",{className:\"updates-header\"},/*#__PURE__*/React.createElement(\"h2\",null,format(activityDate,'d MMM'))));};return/*#__PURE__*/React.createElement(React.Fragment,{key:index},activityDate.getDate()!==currentDate.getDate()?addHeader():' ',/*#__PURE__*/React.createElement(\"div\",{key:index,className:\"update\"},/*#__PURE__*/React.createElement(\"h5\",null,capitalize(formatDistance(new Date(activity.timestamp*1000),new Date()))+' ago'),/*#__PURE__*/React.createElement(\"h4\",{dangerouslySetInnerHTML:{__html:activity.update}})));}),/*#__PURE__*/React.createElement(\"div\",{className:\"updates-footer\"},/*#__PURE__*/React.createElement(\"a\",{href:\"https://t.me/covid19indiaorg_updates\",target:\"_blank\",className:\"telegram\",rel:\"noopener noreferrer\"},/*#__PURE__*/React.createElement(\"h4\",null,/*#__PURE__*/React.createElement(Send,null),\"Join Instant Updates channel\"))));}export default Updates;","map":{"version":3,"sources":["/home/ubuntu/myprojectdir/tracker/covid19india-react/src/components/Updates.js"],"names":["UPDATES_COUNT","capitalize","formatDistance","format","React","useLayoutEffect","Send","newDate","Date","currentDate","Updates","updates","slice","reverse","map","activity","index","update","replace","activityDate","timestamp","addHeader","getDate","__html"],"mappings":"AAAA,OAAQA,aAAR,KAA4B,cAA5B,CACA,OAAQC,UAAR,KAAyB,0BAAzB,CAEA,OAAQC,cAAR,CAAwBC,MAAxB,KAAqC,UAArC,CACA,MAAOC,CAAAA,KAAP,EAAeC,eAAf,KAAqC,OAArC,CACA,OAAQC,IAAR,KAAmB,eAAnB,CAEA,GAAMC,CAAAA,OAAO,CAAG,GAAIC,CAAAA,IAAJ,EAAhB,CACA,GAAIC,CAAAA,WAAW,CAAGF,OAAlB,CAEA,QAASG,CAAAA,OAAT,MAA4B,IAAVC,CAAAA,OAAU,MAAVA,OAAU,CAC1BN,eAAe,CAAC,UAAM,CACpBI,WAAW,CAAGF,OAAd,CACD,CAFc,CAAf,CAIA,mBACE,2BAAK,SAAS,CAAC,SAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,8BAAKJ,MAAM,CAACM,WAAD,CAAc,OAAd,CAAX,CADF,CADF,CAKGE,OAAO,CACLC,KADF,CACQ,CAACZ,aADT,EAEEa,OAFF,GAGEC,GAHF,CAGM,SAAUC,QAAV,CAAoBC,KAApB,CAA2B,CAC9BD,QAAQ,CAACE,MAAT,CAAkBF,QAAQ,CAACE,MAAT,CAAgBC,OAAhB,CAAwB,KAAxB,CAA+B,OAA/B,CAAlB,CACA,GAAMC,CAAAA,YAAY,CAAG,GAAIX,CAAAA,IAAJ,CAASO,QAAQ,CAACK,SAAT,CAAqB,IAA9B,CAArB,CACA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtBZ,WAAW,CAAGU,YAAd,CAEA,mBACE,oBAAC,KAAD,CAAO,QAAP,MACGH,KAAK,GAAK,CAAV,cACC,2BAAK,SAAS,CAAC,QAAf,eACE,gDADF,CADD,CAKC,EANJ,cAQE,2BAAK,SAAS,CAAC,gBAAf,eACE,8BAAKb,MAAM,CAACgB,YAAD,CAAe,OAAf,CAAX,CADF,CARF,CADF,CAcD,CAjBD,CAmBA,mBACE,oBAAC,KAAD,CAAO,QAAP,EAAgB,GAAG,CAAEH,KAArB,EACGG,YAAY,CAACG,OAAb,KAA2Bb,WAAW,CAACa,OAAZ,EAA3B,CACGD,SAAS,EADZ,CAEG,GAHN,cAIE,2BAAK,GAAG,CAAEL,KAAV,CAAiB,SAAS,CAAC,QAA3B,eACE,8BACGf,UAAU,CACTC,cAAc,CACZ,GAAIM,CAAAA,IAAJ,CAASO,QAAQ,CAACK,SAAT,CAAqB,IAA9B,CADY,CAEZ,GAAIZ,CAAAA,IAAJ,EAFY,CADL,CAAV,CAKG,MANN,CADF,cASE,0BACE,uBAAuB,CAAE,CACvBe,MAAM,CAAER,QAAQ,CAACE,MADM,CAD3B,EATF,CAJF,CADF,CAsBD,CA/CF,CALH,cAqDE,2BAAK,SAAS,CAAC,gBAAf,eACE,yBACE,IAAI,CAAC,sCADP,CAEE,MAAM,CAAC,QAFT,CAGE,SAAS,CAAC,UAHZ,CAIE,GAAG,CAAC,qBAJN,eAME,2CACE,oBAAC,IAAD,MADF,gCANF,CADF,CArDF,CADF,CAqED,CAED,cAAeP,CAAAA,OAAf","sourcesContent":["import {UPDATES_COUNT} from '../constants';\nimport {capitalize} from '../utils/commonFunctions';\n\nimport {formatDistance, format} from 'date-fns';\nimport React, {useLayoutEffect} from 'react';\nimport {Send} from 'react-feather';\n\nconst newDate = new Date();\nlet currentDate = newDate;\n\nfunction Updates({updates}) {\n  useLayoutEffect(() => {\n    currentDate = newDate;\n  });\n\n  return (\n    <div className=\"updates\">\n      <div className=\"updates-header\">\n        <h2>{format(currentDate, 'd MMM')}</h2>\n      </div>\n\n      {updates\n        .slice(-UPDATES_COUNT)\n        .reverse()\n        .map(function (activity, index) {\n          activity.update = activity.update.replace(/\\n/g, '<br/>');\n          const activityDate = new Date(activity.timestamp * 1000);\n          const addHeader = () => {\n            currentDate = activityDate;\n\n            return (\n              <React.Fragment>\n                {index === 0 ? (\n                  <div className=\"update\">\n                    <h4>No updates yet!</h4>\n                  </div>\n                ) : (\n                  ''\n                )}\n                <div className=\"updates-header\">\n                  <h2>{format(activityDate, 'd MMM')}</h2>\n                </div>\n              </React.Fragment>\n            );\n          };\n\n          return (\n            <React.Fragment key={index}>\n              {activityDate.getDate() !== currentDate.getDate()\n                ? addHeader()\n                : ' '}\n              <div key={index} className=\"update\">\n                <h5>\n                  {capitalize(\n                    formatDistance(\n                      new Date(activity.timestamp * 1000),\n                      new Date()\n                    )\n                  ) + ' ago'}\n                </h5>\n                <h4\n                  dangerouslySetInnerHTML={{\n                    __html: activity.update,\n                  }}\n                ></h4>\n              </div>\n            </React.Fragment>\n          );\n        })}\n      <div className=\"updates-footer\">\n        <a\n          href=\"https://t.me/covid19indiaorg_updates\"\n          target=\"_blank\"\n          className=\"telegram\"\n          rel=\"noopener noreferrer\"\n        >\n          <h4>\n            <Send />\n            Join Instant Updates channel\n          </h4>\n        </a>\n      </div>\n    </div>\n  );\n}\n\nexport default Updates;\n"]},"metadata":{},"sourceType":"module"}